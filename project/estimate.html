<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Request Estimate | ThermaCore Fireproofing & Insulation</title>
    <meta name="description"
        content="Request a free estimate for our fireproofing, insulation, drywall, and taping services. Upload your blueprints and project details.">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script>
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'en,es,zh-CN',  // Ëã±ËØ≠, Ë•øÁè≠ÁâôËØ≠, ÁÆÄ‰Ωì‰∏≠Êñá
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE
            }, 'google_translate_element');
        }
    </script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</head>

<body>
    <!-- Header (same as other pages) -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>Thermacore</h1>
                <span>Fireproofing & Insulation</span>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html" data-translate-key="nav.home">Home</a></li>
                    <li><a href="about.html" data-translate-key="nav.about">About</a></li>
                    <li><a href="estimate.html" class="active" data-translate-key="nav.estimate">Get Estimate</a></li>
                    <li><a href="contact.html" data-translate-key="nav.contact">Contact</a></li>
                </ul>
            </nav>
            <div class="mobile-menu-btn">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </header>
    <main class="estimate-page">
        <section class="page-header">
            <div class="container">
                <h1>Request a Free Estimate</h1>
                <p>Complete the form below and we'll try to get back to you as soon as possible!</p>
            </div>
        </section>

        <section class="estimate-form">
            <div class="container">
                <form id="estimateRequestForm" enctype="multipart/form-data">
                    <div class="form-section">
                        <h2>Your Information</h2>
                        <div class="form-group">
                            <label for="fullName">Full Name*</label>
                            <input type="text" id="fullName" name="fullName" required>
                            <div class="error-message"></div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="email">Email*</label>
                                <input type="email" id="email" name="email" required>
                                <div class="error-message"></div>
                            </div>
                            <div class="form-group">
                                <label for="phone">Phone*</label>
                                <input type="tel" id="phone" name="phone" required>
                                <div class="error-message"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="company">Company Name</label>
                            <input type="text" id="company" name="company">
                        </div>
                    </div>

                    <div class="form-section">
                        <h2>Project Details</h2>
                        <div class="form-group">
                            <label for="projectType">Project Type*</label>
                            <select id="projectType" name="projectType" required>
                                <option value="">Select project type</option>
                                <option value="commercial">Commercial</option>
                                <option value="residential">Residential</option>
                                <option value="industrial">Industrial</option>
                                <option value="other">Other</option>
                            </select>
                            <div class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <label>Services Needed*</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" name="services[]" value="fireproofing">
                                    Fireproofing</label>
                                <label><input type="checkbox" name="services[]" value="insulation"> Insulation</label>
                                <label><input type="checkbox" name="services[]" value="drywall"> Drywall
                                    Installation</label>
                                <label><input type="checkbox" name="services[]" value="taping"> Drywall Taping</label>
                            </div>
                            <div class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <label for="projectDescription">Project Description*</label>
                            <textarea id="projectDescription" name="projectDescription" rows="4" required></textarea>
                            <div class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <label for="projectTimeline">Project Timeline</label>
                            <select id="projectTimeline" name="projectTimeline">
                                <option value="">Select timeline</option>
                                <option value="urgent">Urgent (within 2 weeks)</option>
                                <option value="1-3 months">1-3 months</option>
                                <option value="3-6 months">3-6 months</option>
                                <option value="planning">Just planning</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-section">
                        <h2>Upload Blueprints (PDF only, max 20 files)</h2>
                        <div class="file-upload-area" id="fileUploadArea">
                            <div class="upload-instructions">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Drag & drop your PDF files here or click to browse</p>
                                <p class="small">Maximum 20 files (10MB each)</p>
                            </div>
                            <input type="file" id="blueprintFiles" name="blueprintFiles" accept=".pdf" multiple
                                style="display: none;">
                        </div>
                        <div class="file-preview" id="filePreview">
                            <p>No files selected</p>
                        </div>
                    </div>

                    <div class="form-submit">
                        <button type="submit" class="btn btn-primary">
                            <span class="button-text">Submit Request</span>
                            <span class="spinner hidden"><i class="fas fa-spinner fa-spin"></i></span>
                        </button>
                        <div class="form-status"></div>
                    </div>
                </form>
            </div>
        </section>
        <div class="custom-translate">
            <button onclick="changeLanguage('en')">English</button>
            <button onclick="changeLanguage('es')">Spanish</button>
            <button onclick="changeLanguage('zh')">Chinese</button>
        </div>
    </main>

    <!-- Footer (same as other pages) -->

    <!-- Add this right before </body> -->

    <script>
        // Enhanced Translation System with persistent language across pages
        (function () {
            // Configuration
            const config = {
                languages: {
                    'en': {
                        name: 'English',
                        flag: 'üá¨üáß',
                        translations: {
                            'nav.home': 'Home',
                            'nav.about': 'About',
                            'nav.estimate': 'Get Estimate',
                            'nav.contact': 'Contact',
                            'hero.title': 'Expert Fireproofing & Insulation Solutions',
                            'hero.text': 'Protecting commercial, residential, and industrial construction with high-quality materials and craftsmanship.',
                            'services.title': 'Our Services',
                            'fireproofing.title': 'Fireproofing',
                            'fireproofing.text': 'Specialized fireproofing solutions to meet building codes and enhance safety.',
                            'insulation.title': 'Insulation',
                            'insulation.text': 'Energy-efficient insulation for temperature control and soundproofing.',
                            'drywall.title': 'Drywall & Taping',
                            'drywall.text': 'Professional drywall installation and finishing for seamless walls.',
                            'cta.title': 'Ready to Start Your Project?',
                            'cta.text': 'Contact us today for a free consultation and estimate.',
                            'footer.about': 'Professional fireproofing and insulation services',
                            'footer.links': 'Quick Links',
                            'footer.contact': 'Contact Us',
                            'footer.copyright': '¬© 2025 All rights reserved'
                        }
                    },
                    'es': {
                        name: 'Espa√±ol',
                        flag: 'üá™üá∏',
                        translations: {
                            'nav.home': 'Inicio',
                            'nav.about': 'Acerca de',
                            'nav.estimate': 'Obtener Presupuesto',
                            'nav.contact': 'Contacto',
                            'hero.title': 'Soluciones Expertas en Protecci√≥n contra Incendios',
                            'hero.text': 'Protecci√≥n de construcciones con materiales de alta calidad y mano de obra calificada.',
                            'services.title': 'Nuestros Servicios',
                            'fireproofing.title': 'Protecci√≥n contra Incendios',
                            'fireproofing.text': 'Soluciones especializadas para cumplir con los c√≥digos de construcci√≥n.',
                            'insulation.title': 'Aislamiento',
                            'insulation.text': 'Aislamiento energ√©ticamente eficiente para control de temperatura.',
                            'drywall.title': 'Drywall & Acabados',
                            'drywall.text': 'Instalaci√≥n profesional de drywall y acabados.',
                            'cta.title': '¬øListo para Comenzar tu Proyecto?',
                            'cta.text': 'Cont√°ctanos hoy para una consulta gratuita.',
                            'footer.about': 'Servicios profesionales de protecci√≥n contra incendios',
                            'footer.links': 'Enlaces R√°pidos',
                            'footer.contact': 'Cont√°ctenos',
                            'footer.copyright': '¬© 2025 Todos los derechos reservados'
                        }
                    },
                    'zh': {
                        name: '‰∏≠Êñá',
                        flag: 'üá®üá≥',
                        translations: {
                            'nav.home': 'È¶ñÈ°µ',
                            'nav.about': 'ÂÖ≥‰∫éÊàë‰ª¨',
                            'nav.estimate': 'Ëé∑ÂèñÊä•‰ª∑',
                            'nav.contact': 'ËÅîÁ≥ªÊàë‰ª¨',
                            'hero.title': '‰∏ì‰∏öÈò≤ÁÅ´‰∏éÁªùÁºòËß£ÂÜ≥ÊñπÊ°à',
                            'hero.text': 'ÈááÁî®‰ºòË¥®ÊùêÊñôÂíåÁ≤æÊπõÂ∑•Ëâ∫Ôºå‰øùÊä§ÂêÑÁ±ªÂª∫Á≠ë„ÄÇ',
                            'services.title': 'Êàë‰ª¨ÁöÑÊúçÂä°',
                            'fireproofing.title': 'Èò≤ÁÅ´Â∑•Á®ã',
                            'fireproofing.text': '‰∏ì‰∏öÁöÑÈò≤ÁÅ´Ëß£ÂÜ≥ÊñπÊ°àÔºåÁ¨¶ÂêàÂª∫Á≠ëËßÑËåÉ„ÄÇ',
                            'insulation.title': 'ÁªùÁºòÊùêÊñô',
                            'insulation.text': 'ËäÇËÉΩÁªùÁºòÊùêÊñôÔºåÁî®‰∫éÊ∏©Â∫¶ÊéßÂà∂ÂíåÈöîÈü≥„ÄÇ',
                            'drywall.title': 'Áü≥ËÜèÊùøÂÆâË£Ö',
                            'drywall.text': '‰∏ì‰∏öÁöÑÁü≥ËÜèÊùøÂÆâË£ÖÂíåÁ≤æÂä†Â∑•ÊúçÂä°„ÄÇ',
                            'cta.title': 'ÂáÜÂ§áÂºÄÂßãÊÇ®ÁöÑÈ°πÁõÆ‰∫ÜÂêóÔºü',
                            'cta.text': 'Á´ãÂç≥ËÅîÁ≥ªÊàë‰ª¨Ëé∑ÂèñÂÖçË¥πÂí®ËØ¢„ÄÇ',
                            'footer.about': '‰∏ì‰∏öÈò≤ÁÅ´‰∏éÁªùÁºòÂ∑•Á®ãÊúçÂä°',
                            'footer.links': 'Âø´ÈÄüÈìæÊé•',
                            'footer.contact': 'ËÅîÁ≥ªÊàë‰ª¨',
                            'footer.copyright': '¬© 2025 ÁâàÊùÉÊâÄÊúâ'
                        }
                    }
                },
                translateElements: ['h1', 'h2', 'h3', 'p', 'span', 'a:not([href])'],
                maxRetries: 2,
                apiPriority: ['google', 'mymemory', 'libre']
            };

            // State
            let currentLang = 'en';
            let originalTexts = {};

            // Initialize
            function init() {
                storeOriginalTexts();

                // Check URL first, then localStorage, then default to English
                const urlParams = new URLSearchParams(window.location.search);
                const urlLang = urlParams.get('lang');
                const savedLang = urlLang || localStorage.getItem('currentLang') || 'en';

                applyLanguage(savedLang, false);
                updateButtonStates();
                modifyInternalLinks();
            }

            // Store original English texts
            function storeOriginalTexts() {
                originalTexts = {};
                const elements = getTranslatableElements();
                elements.forEach((el, index) => {
                    originalTexts['element_' + index] = el.textContent.trim();
                });
            }

            // Main language application function
            function applyLanguage(lang, updateHistory = true) {
                if (!config.languages[lang] || lang === currentLang) return;

                currentLang = lang;
                localStorage.setItem('currentLang', lang);

                // Update URL without reload
                if (updateHistory) {
                    const newUrl = new URL(window.location.href);
                    newUrl.searchParams.set('lang', lang);
                    window.history.pushState({}, '', newUrl);
                }

                // Apply translations
                applyStaticTranslations(lang);

                if (lang !== 'en') {
                    translateDynamicContent(lang);
                } else {
                    restoreOriginalTexts();
                }

                modifyInternalLinks();
            }

            // Apply predefined translations
            function applyStaticTranslations(lang) {
                // Translate navigation and other key elements
                for (const [key, translation] of Object.entries(config.languages[lang].translations)) {
                    const elements = document.querySelectorAll(`[data-translate-key="${key}"]`);
                    elements.forEach(el => {
                        el.textContent = translation;
                    });
                }
            }

            // Translate dynamic content via API
            async function translateDynamicContent(lang) {
                document.body.classList.add('translating');
                try {
                    for (const method of config.apiPriority) {
                        try {
                            await attemptTranslation(method, lang);
                            showTranslationNotice(lang);
                            break;
                        } catch (error) {
                            console.warn(`${method} failed:`, error);
                            continue;
                        }
                    }
                } catch (error) {
                    console.error('All translation methods failed:', error);
                    showErrorNotice(lang);
                } finally {
                    document.body.classList.remove('translating');
                }
            }

            // Attempt translation with specific method
            async function attemptTranslation(method, lang) {
                const elements = getTranslatableElements();
                const texts = elements.map(el => el.textContent.trim());

                let translations;
                switch (method) {
                    case 'google':
                        translations = await googleTranslate(texts, lang);
                        break;
                    case 'mymemory':
                        translations = await myMemoryTranslate(texts, lang);
                        break;
                    case 'libre':
                        translations = await libreTranslate(texts, lang);
                        break;
                    default:
                        throw new Error('Unknown method');
                }

                elements.forEach((el, index) => {
                    if (translations[index]) {
                        el.textContent = translations[index];
                    }
                });
            }

            // Translation APIs
            async function googleTranslate(texts, targetLang) {
                const promises = texts.map(text => {
                    if (!text.trim()) return Promise.resolve('');
                    return fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${targetLang}&dt=t&q=${encodeURIComponent(text)}`)
                        .then(response => response.json())
                        .then(data => data[0][0][0]);
                });
                return Promise.all(promises);
            }

            async function myMemoryTranslate(texts, targetLang) {
                const promises = texts.map(text => {
                    if (!text.trim()) return Promise.resolve('');
                    return fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=en|${targetLang}`)
                        .then(response => response.json())
                        .then(data => data.responseData.translatedText);
                });
                return Promise.all(promises);
            }

            async function libreTranslate(texts, targetLang) {
                const response = await fetch('https://libretranslate.de/translate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        q: texts,
                        source: 'en',
                        target: targetLang,
                        format: 'text'
                    })
                });
                if (!response.ok) throw new Error('API error');
                const data = await response.json();
                return data.translatedText || [];
            }

            // Restore original English texts
            function restoreOriginalTexts() {
                const elements = getTranslatableElements();
                elements.forEach((el, index) => {
                    if (originalTexts['element_' + index]) {
                        el.textContent = originalTexts['element_' + index];
                    }
                });
            }

            // Get elements to translate
            function getTranslatableElements() {
                const elements = [];
                config.translateElements.forEach(selector => {
                    document.querySelectorAll(selector).forEach(el => {
                        if (el.textContent.trim() && !el.closest('[data-notranslate]') && !el.hasAttribute('data-translate-key')) {
                            elements.push(el);
                        }
                    });
                });
                return elements;
            }

            // Update language buttons
            function updateButtonStates() {
                document.querySelectorAll('.custom-translate button').forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.getAttribute('onclick').includes(`'${currentLang}'`)) {
                        btn.classList.add('active');
                    }
                });
            }

            // Modify internal links to include language parameter
            function modifyInternalLinks() {
                if (currentLang === 'en') return;

                document.querySelectorAll('a[href^=""]').forEach(link => {
                    if (link.hostname === window.location.hostname) {
                        const url = new URL(link.href);
                        if (!url.searchParams.has('lang')) {
                            url.searchParams.set('lang', currentLang);
                            link.href = url.toString();
                        }
                    }
                });
            }

            // Show translation notice
            function showTranslationNotice(lang) {
                const notice = document.createElement('div');
                notice.className = 'translation-notice success';
                notice.innerHTML = `Translated to ${config.languages[lang].name} <span class="close-btn">√ó</span>`;
                notice.querySelector('.close-btn').onclick = () => notice.remove();
                document.body.appendChild(notice);
                setTimeout(() => notice.remove(), 3000);
            }

            function showErrorNotice(lang) {
                const notice = document.createElement('div');
                notice.className = 'translation-notice error';
                notice.innerHTML = `Translation to ${config.languages[lang].name} failed <span class="close-btn">√ó</span>`;
                notice.querySelector('.close-btn').onclick = () => notice.remove();
                document.body.appendChild(notice);
                setTimeout(() => notice.remove(), 3000);
            }

            // Public function to change language
            window.changeLanguage = function (lang) {
                applyLanguage(lang, true);
            };

            // Handle back/forward navigation
            window.addEventListener('popstate', function () {
                const urlParams = new URLSearchParams(window.location.search);
                const lang = urlParams.get('lang') || 'en';
                applyLanguage(lang, false);
            });

            // Initialize on load
            document.addEventListener('DOMContentLoaded', init);
        })();
    </script>
    <!-- To: -->
    <script src="/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="/js/estimate.js"></script>
</body>

</html>